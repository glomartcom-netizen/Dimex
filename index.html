<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DimeX Staking</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<style>
body{background:#000;color:#fff;font-family:Arial;text-align:center}
header{color:gold;font-size:28px;padding:20px}
button{padding:14px 25px;margin:10px;background:gold;border:none;border-radius:8px}
.card{background:#111;padding:20px;margin:20px auto;border-radius:12px;width:350px}
input{padding:10px;width:80%;margin:10px}
</style>
</head>

<body>

<header>DimeX Staking</header>

<button onclick="connect()">CONNECT WALLET</button>
<div id="wallet"></div>
<div id="status"></div>

<div id="app" style="display:none">

<div class="card">
<h3>Stake USDT</h3>
<input id="usdtAmount" placeholder="Amount">

<button onclick="approveUSDT()">Approve USDT</button>
<button onclick="stakeUSDT()">Stake</button>
</div>

<div class="card">
<h3>Stake DX</h3>
<input id="dxAmount" placeholder="Amount">

<button onclick="approveDX()">Approve DX</button>
<button onclick="stakeDX()">Stake</button>
</div>

<div class="card">
<button onclick="claim()">CLAIM REWARD</button>
</div>

</div>

<script>

let provider, signer, staking, usdt, dx;

const stakingAddress = "PASTE_STAKING_CONTRACT";
const usdtAddress = "PASTE_USDT";
const dxAddress   = "PASTE_DX";

const stakingABI = [
 "function stakeUSDT(uint amount,uint plan)",
 "function stakeDX(uint amount,uint plan)",
 "function claim()"
];

const erc20ABI = [
 "function approve(address spender,uint amount) external returns(bool)"
];

async function connect(){

if(!window.ethereum){
alert("Install MetaMask");
return;
}

await window.ethereum.request({method:'eth_requestAccounts'});

provider = new ethers.providers.Web3Provider(window.ethereum);
signer = provider.getSigner();

const net = await provider.getNetwork();
if(net.chainId !== 56){
alert("Switch to BSC Mainnet");
return;
}

staking = new ethers.Contract(stakingAddress,stakingABI,signer);
usdt = new ethers.Contract(usdtAddress,erc20ABI,signer);
dx   = new ethers.Contract(dxAddress,erc20ABI,signer);

let addr = await signer.getAddress();
document.getElementById("wallet").innerHTML = addr;
document.getElementById("app").style.display="block";
}

async function approveUSDT(){
let amt = document.getElementById("usdtAmount").value;
let tx = await usdt.approve(stakingAddress,ethers.utils.parseUnits(amt,18));
document.getElementById("status").innerHTML="Approving USDT...";
await tx.wait();
document.getElementById("status").innerHTML="USDT Approved";
}

async function approveDX(){
let amt = document.getElementById("dxAmount").value;
let tx = await dx.approve(stakingAddress,ethers.utils.parseUnits(amt,18));
document.getElementById("status").innerHTML="Approving DX...";
await tx.wait();
document.getElementById("status").innerHTML="DX Approved";
}

async function stakeUSDT(){
let amt = document.getElementById("usdtAmount").value;
let tx = await staking.stakeUSDT(ethers.utils.parseUnits(amt,18),0);
document.getElementById("status").innerHTML="Staking USDT...";
await tx.wait();
document.getElementById("status").innerHTML="USDT Staked";
}

async function stakeDX(){
let amt = document.getElementById("dxAmount").value;
let tx = await staking.stakeDX(ethers.utils.parseUnits(amt,18),0);
document.getElementById("status").innerHTML="Staking DX...";
await tx.wait();
document.getElementById("status").innerHTML="DX Staked";
}

async function claim(){
let tx = await staking.claim();
document.getElementById("status").innerHTML="Claiming...";
await tx.wait();
document.getElementById("status").innerHTML="Reward Claimed";
}

</script>
</body>
</html>
